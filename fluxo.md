┌─────────────────────────────────────────────────────────────────────────────┐
│                                   CLI                                        │
│                    price-collector search "arroz 5kg"                        │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                             PriceCollector                                   │
│                        (Orquestrador Principal)                              │
│                                                                             │
│  • Coordena fluxo completo                                                  │
│  • Valida entradas (query, CEP)                                             │
│  • Gera relatórios e comparações                                            │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
        ┌─────────────────────────────┼─────────────────────────────┐
        │                             │                             │
        ▼                             ▼                             ▼
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│  ScraperManager   │     │ProcessingPipeline │     │  StorageManager   │
│                   │     │                   │     │                   │
│ Coordena scrapers │     │ Processa dados    │     │ Persiste dados    │
│ em paralelo       │     │ brutos            │     │                   │
└───────────────────┘     └───────────────────┘     └───────────────────┘
        │                             │                             │
        ▼                             ▼                             ▼
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│   Rate Limiter    │     │  ProductParser    │     │  SQLiteStorage    │
│   (por domínio)   │     │  (preços)         │     │  (queries)        │
└───────────────────┘     └───────────────────┘     └───────────────────┘
        │                             │                             │
        ▼                             ▼                             ▼
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│   BaseScraper     │     │QuantityNormalizer │     │   CSVStorage      │
│   (Playwright)    │     │ (kg, L, un)       │     │   (exportação)    │
└───────────────────┘     └───────────────────┘     └───────────────────┘
        │                             │                             │
        ▼                             ▼                             ▼
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│ Market Scrapers   │     │ PriceCalculator   │     │ ParquetStorage    │
│ • Carrefour       │     │ (R$/kg, R$/L)     │     │ (big data)        │
│ • Atacadão        │     │                   │     │                   │
│ • Pão de Açúcar   │     │                   │     │                   │
│ • Extra           │     │                   │     │                   │
└───────────────────┘     └───────────────────┘     └───────────────────┘
        │                             │                             │
        ▼                             ▼                             ▼
┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐
│   RawProduct      │────▶│ NormalizedProduct │────▶│    PriceOffer    │
│   (dados brutos)  │     │ (dados limpos)    │     │ (comparável)      │
└───────────────────┘     └───────────────────┘     └───────────────────┘